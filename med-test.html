<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Test Search - LabFinder</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ========================================
           CSS Variables from Style Guide
           ======================================== */
        :root {
            --navbar-height: 80px;
            --navbar-height-sm: 64px;

            /* Primary Colors */
            --wh-blue-0: #ecf5fe;
            --wh-blue-5: #d9ecfd;
            --wh-blue-10: #c1e0fb;
            --wh-blue-20: #a4d1f9;
            --wh-blue-30: #66b2f5;
            --wh-blue-40: #3a9df2;
            --wh-blue-50: #0f82e6;
            --wh-blue-60: #0d77d3;
            --wh-blue-70: #0b61ad;
            --wh-blue-80: #084981;

            /* Green (Success) */
            --wh-green-0: #e5faf0;
            --wh-green-5: #c7f5df;
            --wh-green-10: #a4efcb;
            --wh-green-20: #70e6ad;
            --wh-green-30: #22c375;
            --wh-green-40: #1fad68;
            --wh-green-50: #1b985b;

            /* Purple (Accent) */
            --wh-purple-0: #f9f1fd;
            --wh-purple-5: #f4e3fc;
            --wh-purple-10: #ecd1fa;
            --wh-purple-20: #e5bff8;
            --wh-purple-30: #d495f3;
            --wh-purple-40: #c775f0;
            --wh-purple-50: #b64ceb;
            --wh-purple-60: #af3ae9;
            --wh-purple-70: #9117cf;

            /* Orange */
            --wh-orange-0: #fdf3ed;
            --wh-orange-5: #fae4d6;
            --wh-orange-10: #f8d6bf;
            --wh-orange-20: #f5c4a3;
            --wh-orange-30: #efa06c;
            --wh-orange-40: #e9803a;
            --wh-orange-50: #cf6017;

            /* Red (Error/Urgent) */
            --wh-red-0: #fdf1f1;
            --wh-red-5: #fce3e3;
            --wh-red-10: #fad1d1;
            --wh-red-40: #ef6c6c;
            --wh-red-50: #ea4343;

            /* Yellow (Warning) */
            --wh-yellow-0: #fdf4e2;
            --wh-yellow-10: #f9d99f;
            --wh-yellow-30: #f0a314;
            --wh-yellow-40: #ce8b0d;

            /* Steel (Cool Grays) */
            --wh-steel-0: #f4f5f6;
            --wh-steel-5: #e9ebed;
            --wh-steel-10: #dbdee1;
            --wh-steel-20: #cacfd3;
            --wh-steel-30: #a8b0b8;
            --wh-steel-40: #949fa8;
            --wh-steel-50: #788591;
            --wh-steel-60: #6a7681;
            --wh-steel-70: #555f68;

            /* Neutral (Pure Grays) */
            --wh-neutral-0: #fafafa;
            --wh-neutral-5: #f5f5f5;
            --wh-neutral-10: #f0f0f0;
            --wh-neutral-20: #ebebeb;
            --wh-neutral-30: #dbdbdb;
            --wh-neutral-40: #bfbfbf;
            --wh-neutral-50: #8a8a8a;
            --wh-neutral-90: #1c1c1c;

            /* Base Colors */
            --wh-black: #000;
            --wh-white: #fff;

            /* Semantic Colors */
            --main: #fefbf6;
            --text: var(--wh-black);
            --subtext: var(--wh-steel-70);
        }

        /* ========================================
           Reset & Base Styles
           ======================================== */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            font-family: "Poppins", sans-serif;
            background-color: var(--main);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* ========================================
           Layout
           ======================================== */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .page-wrapper {
            padding: 60px 0;
        }

        /* ========================================
           Header Section
           ======================================== */
        .search-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .search-header h1 {
            font-size: 36px;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 12px;
            color: var(--text);
        }

        .search-header p {
            font-size: 16px;
            color: var(--subtext);
            max-width: 500px;
            margin: 0 auto;
        }

        /* ========================================
           Search Container
           ======================================== */
        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ========================================
           Search Input
           ======================================== */
        .search-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            width: 20px;
            height: 20px;
            color: var(--wh-steel-40);
            pointer-events: none;
        }

        .search-input {
            width: 100%;
            padding: 16px 48px 16px 48px;
            font-size: 16px;
            font-family: "Poppins", sans-serif;
            border: 2px solid var(--wh-neutral-30);
            border-radius: 12px;
            background: var(--wh-white);
            color: var(--text);
            transition: all 0.2s;
        }

        .search-input::placeholder {
            color: var(--wh-steel-40);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--wh-blue-50);
            box-shadow: 0 0 0 4px rgba(15, 130, 230, 0.1);
        }

        .search-input:focus + .search-icon {
            color: var(--wh-blue-50);
        }

        .clear-btn {
            position: absolute;
            right: 16px;
            width: 20px;
            height: 20px;
            background: var(--wh-neutral-30);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            color: var(--wh-white);
            font-size: 12px;
            transition: all 0.2s;
        }

        .clear-btn:hover {
            background: var(--wh-steel-50);
        }

        .clear-btn.visible {
            display: flex;
        }

        /* ========================================
           Autocomplete Dropdown
           ======================================== */
        .autocomplete-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: var(--wh-white);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.12);
            overflow: hidden;
            z-index: 100;
            display: none;
        }

        .autocomplete-dropdown.open {
            display: block;
        }

        /* ========================================
           Dropdown Sections
           ======================================== */
        .dropdown-section {
            padding: 16px 0;
            border-bottom: 1px solid var(--wh-neutral-20);
        }

        .dropdown-section:last-child {
            border-bottom: none;
        }

        .dropdown-section-header {
            padding: 0 20px 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .dropdown-section-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--wh-steel-50);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .dropdown-section-action {
            font-size: 12px;
            font-weight: 500;
            color: var(--wh-blue-50);
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
        }

        .dropdown-section-action:hover {
            color: var(--wh-blue-60);
        }

        /* ========================================
           Autocomplete Items
           ======================================== */
        .autocomplete-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .autocomplete-item:hover,
        .autocomplete-item.highlighted {
            background: var(--wh-neutral-5);
        }

        .autocomplete-item.selected {
            background: var(--wh-blue-0);
        }

        /* Item Icon */
        .item-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .item-icon svg {
            width: 20px;
            height: 20px;
        }

        /* Icon Color Variants */
        .item-icon.blood {
            background: var(--wh-red-5);
            color: var(--wh-red-50);
        }

        .item-icon.imaging {
            background: var(--wh-blue-10);
            color: var(--wh-blue-50);
        }

        .item-icon.heart {
            background: var(--wh-purple-5);
            color: var(--wh-purple-50);
        }

        .item-icon.hormone {
            background: var(--wh-orange-5);
            color: var(--wh-orange-50);
        }

        .item-icon.genetic {
            background: var(--wh-green-5);
            color: var(--wh-green-50);
        }

        .item-icon.allergy {
            background: var(--wh-yellow-0);
            color: var(--wh-yellow-40);
        }

        .item-icon.recent {
            background: var(--wh-neutral-10);
            color: var(--wh-steel-50);
        }

        /* Item Content */
        .item-content {
            flex: 1;
            min-width: 0;
        }

        .item-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--text);
            margin-bottom: 2px;
        }

        .item-name mark {
            background: var(--wh-yellow-10);
            color: var(--text);
            padding: 0 2px;
            border-radius: 2px;
        }

        .item-description {
            font-size: 12px;
            color: var(--subtext);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Item Meta */
        .item-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 4px;
        }

        .item-category {
            font-size: 10px;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .item-category.blood {
            background: var(--wh-red-5);
            color: var(--wh-red-50);
        }

        .item-category.imaging {
            background: var(--wh-blue-10);
            color: var(--wh-blue-60);
        }

        .item-category.cardiac {
            background: var(--wh-purple-5);
            color: var(--wh-purple-60);
        }

        .item-category.hormone {
            background: var(--wh-orange-5);
            color: var(--wh-orange-50);
        }

        .item-category.genetic {
            background: var(--wh-green-5);
            color: var(--wh-green-50);
        }

        .item-category.allergy {
            background: var(--wh-yellow-0);
            color: var(--wh-yellow-40);
        }

        .item-price {
            font-size: 12px;
            font-weight: 600;
            color: var(--wh-green-50);
        }

        /* ========================================
           Quick Categories
           ======================================== */
        .quick-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 0 20px;
        }

        .category-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: var(--wh-neutral-5);
            border: 1px solid var(--wh-neutral-20);
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text);
            cursor: pointer;
            transition: all 0.2s;
        }

        .category-chip:hover {
            background: var(--wh-white);
            border-color: var(--wh-blue-40);
            color: var(--wh-blue-50);
        }

        .category-chip svg {
            width: 14px;
            height: 14px;
        }

        /* ========================================
           Loading State
           ======================================== */
        .loading-state {
            padding: 24px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--wh-neutral-20);
            border-top-color: var(--wh-blue-50);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 14px;
            color: var(--subtext);
        }

        /* ========================================
           No Results State
           ======================================== */
        .no-results {
            padding: 32px 20px;
            text-align: center;
        }

        .no-results-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 16px;
            background: var(--wh-neutral-10);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--wh-steel-40);
        }

        .no-results-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
        }

        .no-results-text {
            font-size: 14px;
            color: var(--subtext);
        }

        /* ========================================
           Footer Info
           ======================================== */
        .dropdown-footer {
            padding: 12px 20px;
            background: var(--wh-neutral-5);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .keyboard-hints {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .keyboard-hint {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--subtext);
        }

        .kbd {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 20px;
            height: 20px;
            padding: 0 6px;
            background: var(--wh-white);
            border: 1px solid var(--wh-neutral-30);
            border-radius: 4px;
            font-size: 11px;
            font-weight: 500;
            color: var(--wh-steel-60);
        }

        .results-count {
            font-size: 12px;
            color: var(--subtext);
        }

        /* ========================================
           Popular Tests Section
           ======================================== */
        .popular-tests {
            margin-top: 48px;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text);
        }

        .see-all {
            font-size: 14px;
            font-weight: 500;
            color: var(--wh-blue-50);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .see-all:hover {
            color: var(--wh-blue-60);
        }

        /* Test Cards Grid */
        .tests-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .test-card {
            background: var(--wh-white);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.2s;
        }

        .test-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        }

        .test-card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }

        .test-card-icon svg {
            width: 24px;
            height: 24px;
        }

        .test-card-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 4px;
        }

        .test-card-desc {
            font-size: 12px;
            color: var(--subtext);
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .test-card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .test-card-price {
            font-size: 16px;
            font-weight: 700;
            color: var(--wh-green-50);
        }

        .test-card-badge {
            font-size: 10px;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 6px;
            background: var(--wh-blue-10);
            color: var(--wh-blue-60);
        }

        /* ========================================
           Responsive Design
           ======================================== */
        @media (max-width: 768px) {
            .search-header h1 {
                font-size: 28px;
            }

            .tests-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .keyboard-hints {
                display: none;
            }
        }

        @media (max-width: 480px) {
            .tests-grid {
                grid-template-columns: 1fr;
            }

            .quick-categories {
                flex-wrap: nowrap;
                overflow-x: auto;
                padding-bottom: 8px;
            }

            .category-chip {
                flex-shrink: 0;
            }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <div class="container">
            <!-- Header -->
            <div class="search-header">
                <h1>Find Your Medical Test</h1>
                <p>Search from over 500+ diagnostic tests and health screenings near you</p>
            </div>

            <!-- Search Container -->
            <div class="search-container">
                <div class="search-input-wrapper">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input
                        type="text"
                        class="search-input"
                        id="searchInput"
                        placeholder="Search tests, panels, or conditions..."
                        autocomplete="off"
                    >
                    <button class="clear-btn" id="clearBtn">
                        <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>

                <!-- Autocomplete Dropdown -->
                <div class="autocomplete-dropdown" id="dropdown">

                    <!-- Quick Categories (shown when empty) -->
                    <div class="dropdown-section" id="categoriesSection">
                        <div class="dropdown-section-header">
                            <span class="dropdown-section-title">Browse Categories</span>
                        </div>
                        <div class="quick-categories">
                            <div class="category-chip" data-category="blood">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8z"/>
                                </svg>
                                Blood Tests
                            </div>
                            <div class="category-chip" data-category="imaging">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Imaging
                            </div>
                            <div class="category-chip" data-category="cardiac">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                                Cardiac
                            </div>
                            <div class="category-chip" data-category="hormone">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                                </svg>
                                Hormones
                            </div>
                            <div class="category-chip" data-category="genetic">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M2 15c6.667-6 13.333 0 20-6"/>
                                    <path d="M9 22c1.798-1.998 2.518-3.995 2.807-5.993"/>
                                    <path d="M15 2c-1.798 1.998-2.518 3.995-2.807 5.993"/>
                                </svg>
                                Genetic
                            </div>
                        </div>
                    </div>

                    <!-- Recent Searches -->
                    <div class="dropdown-section" id="recentSection">
                        <div class="dropdown-section-header">
                            <span class="dropdown-section-title">Recent Searches</span>
                            <button class="dropdown-section-action" id="clearRecent">Clear all</button>
                        </div>
                        <div class="autocomplete-item" data-value="Complete Blood Count">
                            <div class="item-icon recent">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                            </div>
                            <div class="item-content">
                                <div class="item-name">Complete Blood Count (CBC)</div>
                                <div class="item-description">Searched 2 days ago</div>
                            </div>
                        </div>
                        <div class="autocomplete-item" data-value="Lipid Panel">
                            <div class="item-icon recent">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                            </div>
                            <div class="item-content">
                                <div class="item-name">Lipid Panel</div>
                                <div class="item-description">Searched 1 week ago</div>
                            </div>
                        </div>
                    </div>

                    <!-- Search Results (hidden by default) -->
                    <div class="dropdown-section" id="resultsSection" style="display: none;">
                        <div class="dropdown-section-header">
                            <span class="dropdown-section-title">Test Results</span>
                        </div>
                        <div id="resultsList">
                            <!-- Results populated by JS -->
                        </div>
                    </div>

                    <!-- Loading State -->
                    <div class="loading-state" id="loadingState" style="display: none;">
                        <div class="loading-spinner"></div>
                        <span class="loading-text">Searching tests...</span>
                    </div>

                    <!-- No Results State -->
                    <div class="no-results" id="noResults" style="display: none;">
                        <div class="no-results-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"/>
                                <path d="M21 21l-4.35-4.35"/>
                                <path d="M8 8l6 6M14 8l-6 6"/>
                            </svg>
                        </div>
                        <div class="no-results-title">No tests found</div>
                        <div class="no-results-text">Try adjusting your search or browse categories above</div>
                    </div>

                    <!-- Dropdown Footer -->
                    <div class="dropdown-footer" id="dropdownFooter">
                        <div class="keyboard-hints">
                            <div class="keyboard-hint">
                                <span class="kbd">↑</span>
                                <span class="kbd">↓</span>
                                <span>Navigate</span>
                            </div>
                            <div class="keyboard-hint">
                                <span class="kbd">Enter</span>
                                <span>Select</span>
                            </div>
                            <div class="keyboard-hint">
                                <span class="kbd">Esc</span>
                                <span>Close</span>
                            </div>
                        </div>
                        <span class="results-count" id="resultsCount"></span>
                    </div>
                </div>
            </div>

            <!-- Popular Tests Section -->
            <div class="popular-tests">
                <div class="section-header">
                    <h2 class="section-title">Popular Tests</h2>
                    <a href="#" class="see-all">
                        See all tests
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>
                <div class="tests-grid">
                    <div class="test-card">
                        <div class="test-card-icon item-icon blood">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8z"/>
                            </svg>
                        </div>
                        <div class="test-card-name">Complete Blood Count</div>
                        <div class="test-card-desc">Measures red/white blood cells and platelets</div>
                        <div class="test-card-footer">
                            <span class="test-card-price">$29</span>
                            <span class="test-card-badge">Most Popular</span>
                        </div>
                    </div>
                    <div class="test-card">
                        <div class="test-card-icon item-icon hormone">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                            </svg>
                        </div>
                        <div class="test-card-name">Thyroid Panel</div>
                        <div class="test-card-desc">TSH, T3, T4 hormone levels</div>
                        <div class="test-card-footer">
                            <span class="test-card-price">$49</span>
                            <span class="test-card-badge">Recommended</span>
                        </div>
                    </div>
                    <div class="test-card">
                        <div class="test-card-icon item-icon heart">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </div>
                        <div class="test-card-name">Lipid Panel</div>
                        <div class="test-card-desc">Cholesterol & triglyceride levels</div>
                        <div class="test-card-footer">
                            <span class="test-card-price">$35</span>
                            <span class="test-card-badge">Heart Health</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample medical tests data
        const medicalTests = [
            { id: 1, name: "Complete Blood Count (CBC)", description: "Comprehensive blood cell analysis", category: "blood", price: 29 },
            { id: 2, name: "Complete Metabolic Panel (CMP)", description: "14 blood tests for metabolism", category: "blood", price: 45 },
            { id: 3, name: "Comprehensive Thyroid Panel", description: "TSH, T3, T4, and antibodies", category: "hormone", price: 89 },
            { id: 4, name: "Lipid Panel", description: "Cholesterol and triglycerides", category: "cardiac", price: 35 },
            { id: 5, name: "Hemoglobin A1C", description: "Blood sugar average over 3 months", category: "blood", price: 32 },
            { id: 6, name: "Vitamin D, 25-Hydroxy", description: "Vitamin D deficiency screening", category: "blood", price: 55 },
            { id: 7, name: "Thyroid Stimulating Hormone (TSH)", description: "Basic thyroid function test", category: "hormone", price: 35 },
            { id: 8, name: "Chest X-Ray", description: "Standard chest radiograph", category: "imaging", price: 75 },
            { id: 9, name: "MRI Brain", description: "Detailed brain imaging", category: "imaging", price: 450 },
            { id: 10, name: "CT Scan Abdomen", description: "Abdominal computed tomography", category: "imaging", price: 350 },
            { id: 11, name: "Electrocardiogram (ECG/EKG)", description: "Heart electrical activity", category: "cardiac", price: 50 },
            { id: 12, name: "Echocardiogram", description: "Heart ultrasound imaging", category: "cardiac", price: 180 },
            { id: 13, name: "Testosterone, Total", description: "Male hormone level test", category: "hormone", price: 65 },
            { id: 14, name: "Estrogen Panel", description: "Female hormone levels", category: "hormone", price: 85 },
            { id: 15, name: "Genetic Carrier Screening", description: "Hereditary condition testing", category: "genetic", price: 299 },
            { id: 16, name: "BRCA Gene Testing", description: "Breast cancer gene analysis", category: "genetic", price: 399 },
            { id: 17, name: "Food Allergy Panel", description: "Common food allergen test", category: "allergy", price: 189 },
            { id: 18, name: "Respiratory Allergy Panel", description: "Airborne allergen screening", category: "allergy", price: 169 },
            { id: 19, name: "Prostate Specific Antigen (PSA)", description: "Prostate health screening", category: "blood", price: 45 },
            { id: 20, name: "Liver Function Panel", description: "Hepatic health assessment", category: "blood", price: 42 },
        ];

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const clearBtn = document.getElementById('clearBtn');
        const dropdown = document.getElementById('dropdown');
        const categoriesSection = document.getElementById('categoriesSection');
        const recentSection = document.getElementById('recentSection');
        const resultsSection = document.getElementById('resultsSection');
        const resultsList = document.getElementById('resultsList');
        const loadingState = document.getElementById('loadingState');
        const noResults = document.getElementById('noResults');
        const resultsCount = document.getElementById('resultsCount');

        let highlightedIndex = -1;
        let currentResults = [];

        // Event Listeners
        searchInput.addEventListener('focus', () => {
            dropdown.classList.add('open');
            updateDropdownState();
        });

        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.trim();
            clearBtn.classList.toggle('visible', query.length > 0);

            if (query.length > 0) {
                showLoading();
                // Simulate API delay
                setTimeout(() => {
                    searchTests(query);
                }, 300);
            } else {
                updateDropdownState();
            }
        });

        searchInput.addEventListener('keydown', (e) => {
            const items = resultsList.querySelectorAll('.autocomplete-item');

            if (e.key === 'ArrowDown') {
                e.preventDefault();
                highlightedIndex = Math.min(highlightedIndex + 1, items.length - 1);
                updateHighlight(items);
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                highlightedIndex = Math.max(highlightedIndex - 1, 0);
                updateHighlight(items);
            } else if (e.key === 'Enter' && highlightedIndex >= 0) {
                e.preventDefault();
                selectItem(items[highlightedIndex]);
            } else if (e.key === 'Escape') {
                dropdown.classList.remove('open');
                searchInput.blur();
            }
        });

        clearBtn.addEventListener('click', () => {
            searchInput.value = '';
            clearBtn.classList.remove('visible');
            searchInput.focus();
            updateDropdownState();
        });

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                dropdown.classList.remove('open');
            }
        });

        // Category chips
        document.querySelectorAll('.category-chip').forEach(chip => {
            chip.addEventListener('click', () => {
                const category = chip.dataset.category;
                searchInput.value = category.charAt(0).toUpperCase() + category.slice(1);
                searchTests(category);
                clearBtn.classList.add('visible');
            });
        });

        // Recent items
        document.querySelectorAll('#recentSection .autocomplete-item').forEach(item => {
            item.addEventListener('click', () => {
                searchInput.value = item.dataset.value;
                searchTests(item.dataset.value);
                clearBtn.classList.add('visible');
            });
        });

        // Clear recent
        document.getElementById('clearRecent').addEventListener('click', (e) => {
            e.stopPropagation();
            recentSection.style.display = 'none';
        });

        // Functions
        function showLoading() {
            categoriesSection.style.display = 'none';
            recentSection.style.display = 'none';
            resultsSection.style.display = 'none';
            noResults.style.display = 'none';
            loadingState.style.display = 'flex';
            resultsCount.textContent = '';
        }

        function updateDropdownState() {
            loadingState.style.display = 'none';
            noResults.style.display = 'none';

            if (searchInput.value.trim() === '') {
                categoriesSection.style.display = 'block';
                recentSection.style.display = 'block';
                resultsSection.style.display = 'none';
                resultsCount.textContent = '';
            }
        }

        function searchTests(query) {
            query = query.toLowerCase();
            currentResults = medicalTests.filter(test =>
                test.name.toLowerCase().includes(query) ||
                test.description.toLowerCase().includes(query) ||
                test.category.toLowerCase().includes(query)
            );

            loadingState.style.display = 'none';
            categoriesSection.style.display = 'none';
            recentSection.style.display = 'none';

            if (currentResults.length > 0) {
                resultsSection.style.display = 'block';
                noResults.style.display = 'none';
                resultsCount.textContent = `${currentResults.length} results`;
                renderResults(currentResults, query);
            } else {
                resultsSection.style.display = 'none';
                noResults.style.display = 'block';
                resultsCount.textContent = '0 results';
            }

            highlightedIndex = -1;
        }

        function renderResults(results, query) {
            resultsList.innerHTML = results.map((test, index) => `
                <div class="autocomplete-item" data-index="${index}" data-id="${test.id}">
                    <div class="item-icon ${test.category}">
                        ${getCategoryIcon(test.category)}
                    </div>
                    <div class="item-content">
                        <div class="item-name">${highlightMatch(test.name, query)}</div>
                        <div class="item-description">${test.description}</div>
                    </div>
                    <div class="item-meta">
                        <span class="item-category ${test.category}">${test.category}</span>
                        <span class="item-price">$${test.price}</span>
                    </div>
                </div>
            `).join('');

            // Add click handlers
            resultsList.querySelectorAll('.autocomplete-item').forEach(item => {
                item.addEventListener('click', () => selectItem(item));
            });
        }

        function getCategoryIcon(category) {
            const icons = {
                blood: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8z"/></svg>',
                imaging: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="12" cy="12" r="3"/></svg>',
                cardiac: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>',
                hormone: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>',
                genetic: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 15c6.667-6 13.333 0 20-6"/><path d="M9 22c1.798-1.998 2.518-3.995 2.807-5.993"/></svg>',
                allergy: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4M12 16h.01"/></svg>'
            };
            return icons[category] || icons.blood;
        }

        function highlightMatch(text, query) {
            if (!query) return text;
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<mark>$1</mark>');
        }

        function updateHighlight(items) {
            items.forEach((item, index) => {
                item.classList.toggle('highlighted', index === highlightedIndex);
            });

            if (highlightedIndex >= 0 && items[highlightedIndex]) {
                items[highlightedIndex].scrollIntoView({ block: 'nearest' });
            }
        }

        function selectItem(item) {
            const name = item.querySelector('.item-name').textContent;
            searchInput.value = name;
            dropdown.classList.remove('open');
            clearBtn.classList.add('visible');

            // Here you would typically navigate to the test details or add to cart
            console.log('Selected test:', name);
        }
    </script>
</body>
</html>
