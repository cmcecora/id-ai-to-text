<div class="upload-page-container">
  <!-- Processing Progress Bar -->
  <div *ngIf="isProcessing" class="processing-overlay">
    <div class="progress-container">
      <mat-progress-spinner
        mode="determinate"
        [value]="processingProgress"
        diameter="80"
        strokeWidth="4"
      ></mat-progress-spinner>
      <p>{{ Math.round(processingProgress) }}% - Processing document...</p>
    </div>
  </div>

  <!-- Two Column Flexbox Layout -->
  <div class="two-column-layout">
    <!-- Left Panel: Upload -->
    <div class="column left-column">
      <mat-card class="upload-card">
        <mat-card-header>
          <mat-card-title>Upload ID Photo</mat-card-title>
          <mat-card-subtitle>
            {{ isProcessing ? 'Processing...' : 'Select an ID photo to begin' }}
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <app-upload-panel
            (fileProcessed)="onFileProcessed($event)"
            [disabled]="isProcessing">
          </app-upload-panel>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Right Panel: Form -->
    <div class="column right-column">
      <mat-card class="form-card">
        <mat-card-header>
          <mat-card-title>Extracted Information</mat-card-title>
          <mat-card-subtitle>
            {{ ocrData ? 'Review and edit extracted data' : 'Waiting for ID photo upload...' }}
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <app-data-form
            [ocrData]="ocrData"
            [isProcessing]="isProcessing"
            (formSave)="onDataFormSave($event)"
            (formEdit)="onDataFormEdit()">
          </app-data-form>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>